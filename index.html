<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="src/style.css">
    <link rel="stylesheet" href="src/navbar.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=mail" />
</head>

<body>
    <div class="header">
        <div class="progress-container">
            <div class="progress-bar" id="myBar"></div>
        </div>
    </div>
    <div>
        <div class="navbar">
            <div class="menu-btn" onclick="onToggle()">
                <div class="btn-line"></div>
                <div class="btn-line"></div>
                <div class="btn-line"></div>
            </div>
            <a href="src/index.html" class="logo menu-item">Hugh Thompson</a>
            <a href="src/portfolio.html" class="menu-item">Portfolio</a>
            <a href="" class="menu-item">My Services</a>
            <a href="" class="menu-item">Blog</a>
            <a href="" class="menu-item">Contact</a>
        </div>

        <div class="parallax" id="parallax">
            <div class="background">
                <h1 class="statement">Hi,<br> I'm Hugh Thompson</h1>

            </div>
            <div class="subtitle foreground" style="top : 85vh;">
                <p><i class="scroll-down" id="arrow"></i></p>
            </div>



            <div class="info_block foreground" style="top: 90vh;">
                <img src="public/placeholder_headshot.jpg" alt="A business headhsot of Hugh Thompson"
                    style="max-width: 250px;">
                <div class="container" style=" align-self: flex-start;">
                    <div>
                        <h2>About Me</h2>
                        <p>
                            Lorem ipsum dolor sit amet consectetur adipisicing elit. Similique recusandae vel quam
                            dignissimos
                            modi explicabo et nobis vero exercitationem adipisci, optio voluptatum maxime quaerat
                            eaque
                            corrupti
                            harum. Alias, vel harum. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Animi
                            repellat
                            sed eius reprehenderit ratione? Perspiciatis exercitationem dolor esse in maxime ea
                            labore
                            vel
                            praesentium! Illum aliquid libero quas consequuntur quidem.
                            <a href="www.google.com">hello 123</a>
                                <ul class="workingon">
                                    <li>
                                        Currently working on : <a id="project_link"></a> <span id="current-project"></span>
                                    </li>
                                </ul>
                        </p>
                    </div>
                    <div class="button">A button</div>
                </div>



            </div>
            <!-- <div class="footer foreground" style="">
                <a href=""><img src="assets\InBug-Black.png" alt="LinkedIn Logo" class="footer-logo"></a>
                <a href=""><img src="assets\mail-icon-black-5-2152404370.jpg" alt="mail icon" class="footer-logo"></a>
                <br>
                <div style="font-size: 0.7rem;">
                    Â© 2025 Hugh Thompson Made with using HTML, CSS, and JavaScript
                    
                </div>
            </div> -->
        </div>
    </div>
</body>
<script src="src/index.js" type="module"></script>
<script>

function timeAgo(dateString) {
  const now = new Date();
  const past = new Date(dateString);
  const diffInSeconds = Math.floor((now - past) / 1000);

  const intervals = [
    { label: "year", seconds: 31536000 },
    { label: "month", seconds: 2592000 },
    { label: "day", seconds: 86400 },
    { label: "hour", seconds: 3600 },
    { label: "minute", seconds: 60 },
    { label: "second", seconds: 1 },
  ];

  for (const interval of intervals) {
    const count = Math.floor(diffInSeconds / interval.seconds);
    if (count >= 1) {
      return `${count} ${interval.label}${count > 1 ? "s" : ""} ago`;
    }
  }

  return "just now";
}

function formatNiceDate(dateString) {
  const date = new Date(dateString);
  return new Intl.DateTimeFormat("en-US", {
    weekday: "long",
    year: "numeric",
    month: "long",
    day: "numeric",
    hour: "numeric",
    minute: "2-digit",
    hour12: true,
  }).format(date);
}

async function getLastPublicRepoCommitWithFormattedTime(username) {
  const response = await fetch(`https://api.github.com/users/${username}/events/public`);

  if (!response.ok) {
    throw new Error(`Failed to fetch public events for ${username}`);
  }

  const events = await response.json();
  const pushEvent = events.find(event => event.type === "PushEvent");

  if (!pushEvent) {
    throw new Error(`No recent public commits found for ${username}`);
  }

  const repoName = pushEvent.repo.name;
  const commit = pushEvent.payload.commits?.[0];
  const timestamp = commit?.timestamp || pushEvent.created_at;

  return {
      repo: repoName,
      exactTime: formatNiceDate(timestamp),
      relativeTime: timeAgo(timestamp)
    };
}

// `https://api.github.com/users/Salmon-master/events/public`
// Example usage
getLastPublicRepoCommitWithFormattedTime("Salmon-master")
.then(data => {
    console.log(`Last commit to ${data.repo}`);
    console.log(`Time: (${data.relativeTime})`);
    document.getElementById("project_link").href = `https://github.com/` + data.repo;
    document.getElementById("project_link").innerText = ` ${data.repo}`;
    document.getElementById("current-project").innerText = ` (${data.relativeTime})`;
  })
  .catch(err => console.error("Error:", err.message));

</script>

</html>